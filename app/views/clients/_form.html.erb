<%= form_for(@client, :html => {:id => 'clients'}) do |f| %>
    <% if @client.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@client.errors.count, 'error') %> prohibited this client from being saved:</h2>

          <ul>
            <% @client.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <div class = "panel panel-primary">
      <div class = "panel-heading">
        <h3>&nbsp;Business Information</h3>
      </div>
      <div class = "panel-body">
        <% if @client.new_record? %>
        <div class="alert alert-info" id="checkClients">
          <p>Check the tables below to see if your client is already pending or unapproved.</p>
        </div>
        <% end %>

        <table>
          <tr>
            <td class="label-field">
              <%= f.label :business_name, class: 'required' %>
            </td>
            <td class="text-field">
              <%= f.text_field :business_name, class: 'form-control',  rows:3 %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label :address, class: 'required' %>
            </td>
            <td class="text-field">
              <%= f.text_field :address, class: 'form-control',  rows:3 %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label :city, class: 'required' %>
            </td>
            <td class="text-field">
              <%= f.text_field :city, class: 'form-control',  rows:3 %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label :state %>
            </td>
            <td class="text-field">
              <%= f.select :state, %w(AL AK AZ AR CA CO CT DE DC FL GA HI ID IL IN IA KS KY LA ME
                                      MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI
                                      SC SD TN TX UT VT VA WA WV WI WY), { selected: @client.state || 'FL'}, { class: 'btn btn-default dropdown-toggle' } %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label :zipcode, class: 'required' %>
            </td>
            <td class="text-field">
              <%= f.text_field :zipcode, class: 'form-control',  rows:3 %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label 'Contact title' %>
            </td>
            <td class="text-field">
              <%= f.select :contact_title, %w(Mr. Mrs. Ms. Miss Dr.), { include_blank: :true}, { class: 'btn btn-default dropdown-toggle' } %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label 'First name' %>
            </td>
            <td class="text-field">
              <%= f.text_field :contact_fname, class: 'form-control' %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label 'Last name' %>
            </td>
            <td class="text-field">
              <%= f.text_field :contact_lname, class: 'form-control' %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label 'Email' %>
            </td>
            <td class="text-field">
              <%= f.text_field :email, class: 'form-control' %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label :telephone, 'Phone', class: 'required' %>
            </td>
            <td class="text-field">
              <%= f.text_field :telephone, value: render_phone(@client.telephone), :placeholder => '850-478-8496 Ext.####', class: 'form-control',  rows:3  %>
            </td>
          </tr>
          <tr>
            <td class="label-field">
              <%= f.label :comment %>
            </td>
            <td class="text-field">
              <%= f.text_area :comment, class: 'form-control',  rows:3  %>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div class="actions">
    	<% if @client.new_record? %>
		  <% if current_user.role == 3 %>
		  	<%= f.submit 'Submit Client', :class => 'btn btn-small btn-primary'%>
		  <% elsif more_tickets_allowed %>
		  	<%= f.submit "Submit for teacher's approval", :class => 'btn btn-small btn-primary'%>
		  <% else %>
		  	<%= f.submit 'Submit Client', :class => 'btn btn-small btn-primary', disabled: true %>
		  	<p class="text-info">You already have the maximum allowable clients.
		  		Please go to <%= link_to 'My Clients', my_receipts_path(id: current_user.id) %>
		    	and release one of your clients before asking for another.</p>
		  <% end %>
	  <% else %>
	     <%= f.submit 'Update Client', :class => 'btn btn-small btn-primary'%>
	  <% end %>
    </div>
    

<% end %>
